!function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!u&&l)return l(o,!0);if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return i(n||e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./table-logic"),u=r(o),l=e("./table-dom"),s=r(l),d=function(){function e(){i(this,e)}return a(e,null,[{key:"load",value:function(e,t){if(!e)throw new Error("Argument 1 is missing: configuration json");if(!t)throw new Error("Argument 2 is missing: array model");var n=new u.default(e,t),r=function t(){var r=new s.default(e);n.load(r.draw.bind(r)),window.removeEventListener("DOMContentLoaded",t)};return window.addEventListener("DOMContentLoaded",r),"complete"===document.readyState&&r(),n}}]),e}();window.pyrite||(window.pyrite={}),n.default=t.exports=window.pyrite.Table=d},{"./table-dom":2,"./table-logic":3}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./utils.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){function e(t){r(this,e),this.iconMapper={fa:{asc:"fa-sort-asc",desc:"fa-sort-desc"}},this.elements=this.getElements(t)}return i(e,[{key:"getElements",value:function(e){var t={table:document.getElementById(e.table),search:{input:document.getElementById("input-"+e.search.id),button:document.getElementById("button-"+e.search.id)},text:{total:document.getElementById(e.text.total),filter:document.getElementById(e.text.filter)},fields:{}};return e.fields.forEach(function(e){t.fields[e.field]={input:document.getElementById("input-"+e.id),button:document.getElementById("button-"+e.id)}}),t}},{key:"clean",value:function(){this.elements.table.innerHTML=""}},{key:"draw",value:function(e){this.clean(),this.__addEvents(e),this.__drawHeaders(e),this.__drawBody(e),this.__drawText(e)}},{key:"__addEvents",value:function(e){this.__setSimpleSearch(e),this.__setAdvancedSearch(e)}},{key:"__drawCol",value:function(e,t,n){var r=document.createElement("td");n.template?r.innerHTML=n.template(t):r.innerText=o.default.getPropertyByString(t,n.field),e.appendChild(r)}},{key:"__drawText",value:function(e){var t=this.elements.text;if(t&&(t.total&&(t.total.innerText=e.model.length),t.filter)){var n=e.filter?e.filter.length:e.model.length;t.filter.innerText=n}}},{key:"__drawHeaders",value:function(e){var t=document.createElement("thead"),n=document.createElement("tr");e.fields.forEach(this.__drawOrder.bind(this,e,n)),t.appendChild(n),this.elements.table.appendChild(t)}},{key:"__drawLink",value:function(e,t,n){n.href="javascript:void(0)";var r=document.createElement("i");r.className="fa ",r.style.marginLeft="5px";var i=this.iconMapper.fa[e.orderField[t.field]];r.className+=i||"fa-sort",n.addEventListener("click",e.order.bind(e,t)),n.appendChild(r)}},{key:"__drawOrder",value:function(e,t,n){var r=n.order||n.field&&!1!==n.order,i=document.createElement("th"),a=document.createElement(r?"a":"span");a.innerText=n.title,r&&this.__drawLink(e,n,a),i.appendChild(a),t.appendChild(i)}},{key:"__drawBody",value:function(e){var t=this,n=document.createElement("tbody");(e.filter||e.model).forEach(function(r){var i=document.createElement("tr");e.fields.forEach(function(e){t.__drawCol(i,r,e)}),n.appendChild(i)}),this.elements.table.appendChild(n)}},{key:"__setSearchTimeout",value:function(e,t,n,r){clearTimeout(this.searchInProgres),this.searchInProgres=setTimeout(t.bind(e,n),r)}},{key:"__setSimpleSearch",value:function(e){var t=this;this.elements.search.input&&(this.elements.search.input.addEventListener("keypress",function(n){13===n.keyCode&&t.__setSearchTimeout(e,e.simpleSearch,n.target.value)}),this.elements.search.button&&this.elements.search.button.addEventListener("click",function(){t.__setSearchTimeout(e,e.simpleSearch,t.elements.search.input.value)}))}},{key:"__setAdvancedSearch",value:function(e){var t=this,n={};e.fields.forEach(function(r,i){var a=t.elements.fields[r.field];n[r.field]=a,a.input&&(a.input.addEventListener("keypress",function(i){(r.autorefresh||13===i.keyCode)&&t.__setSearchTimeout(e,e.advancedSearch,n,r.autorefresh)}),a.button&&a.button.addEventListener("click",function(){t.__setSearchTimeout(e,e.advancedSearch,n)}))})}}]),e}();n.default=u},{"./utils.js":4}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./utils.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(){function e(t,n){r(this,e),this.config=t,this.fields=t.fields,this.model=n,this.orderField={}}return i(e,[{key:"load",value:function(e){return this.render=e,this.render(this),this}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.filter=e,this.render(this)}},{key:"simpleSearch",value:function(e){var t=this,n=o.default.transformString(e);this.searchFields||(this.config.search&&this.config.search.fields?this.searchFields=this.fields.filter(function(e){return t.config.search.fields.includes(e.field)}):this.searchFields=this.fields.filter(function(e){return e.field}));var r=this.model.filter(function(e){return t.searchFields.some(function(t){return o.default.transformString(o.default.getPropertyByString(e,t.field)).indexOf(n)>=0})});this.reload(r)}},{key:"advancedSearch",value:function(e){var t=this.model;this.fields.forEach(function(n){var r=e[n.field];if(r&&r.input){var i=o.default.transformString(r.input.value);t=t.filter(function(e){return o.default.transformString(o.default.getPropertyByString(e,n.field)).indexOf(i)>=0})}}),this.reload(t)}},{key:"order",value:function(e){var t=e.field,n=1,r=-1;"asc"===this.orderField[t]?(n=-1,r=1,this.orderField={},this.orderField[t]="desc"):(this.orderField={},this.orderField[t]="asc");var i=this.filter||this.model,a=null;a=e.order?i.sort(function(t,r){return e.order(t,r)*n}):i.sort(function(e,i){var a=o.default.getPropertyByString(e,t),u=o.default.getPropertyByString(i,t);return a>u?n:a<u?r:0}),this.reload(a)}}]),e}();n.default=u},{"./utils.js":4}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?n(t.plain?i.responseText:JSON.parse(i.responseText)):r({status:i.status,message:i.responseText}))},i.open(t.method||"GET",e,!0),i.send()})}},{key:"getPropertyByString",value:function(e,t){for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},{key:"transformString",value:function(e){return e.toString().toUpperCase().trim()}}]),e}();n.default=new a},{}]},{},[1]);
!function e(t,n,i){function r(o,l){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return r(n||e)},d,d.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./table-logic"),l=i(o),s=e("./table-dom"),u=i(s),d=function(){function e(){r(this,e)}return a(e,null,[{key:"load",value:function(e,t){if(!e)throw new Error("Argument 1 is missing: configuration json");if(!t)throw new Error("Argument 2 is missing: array model");var n=new l.default(e,t),i=function t(){var i=new u.default(e);n.load(i.draw.bind(i)),window.removeEventListener("DOMContentLoaded",t)};return window.addEventListener("DOMContentLoaded",i),"complete"===document.readyState&&i(),n}}]),e}();window.pyrite||(window.pyrite={}),n.default=t.exports=window.pyrite.Table=d},{"./table-dom":2,"./table-logic":3}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./utils.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t){i(this,e),this.config=t,this.iconMapper={fa:{asc:"fa-sort-asc",desc:"fa-sort-desc"}},this.elements=this.getElements(t)}return r(e,[{key:"getElements",value:function(e){var t={table:document.getElementById(e.table),search:{input:document.getElementById("input-"+e.search.id),button:document.getElementById("button-"+e.search.id)},text:{total:document.getElementById(e.text.total),filter:document.getElementById(e.text.filter)},pagination:{first:document.getElementById(e.pagination.id+"-first"),previous:document.getElementById(e.pagination.id+"-previous"),next:document.getElementById(e.pagination.id+"-next"),current:document.getElementById(e.pagination.id+"-current"),total:document.getElementById(e.pagination.id+"-total"),last:document.getElementById(e.pagination.id+"-last")},fields:{}};return e.fields.forEach(function(e){t.fields[e.field]={input:document.getElementById("input-"+e.id),button:document.getElementById("button-"+e.id)}}),t}},{key:"clean",value:function(){this.elements.table.innerHTML=""}},{key:"draw",value:function(e){this.clean(),this.hasEvents||this.__addEvents(e),this.__drawPagination(e),this.__drawHeaders(e),this.__drawBody(e),this.__drawText(e)}},{key:"__addEvents",value:function(e){this.hasEvents=!0,this.__setSimpleSearch(e),this.__setAdvancedSearch(e),this.__setPagination(e)}},{key:"__drawCol",value:function(e,t,n){var i=document.createElement("td");n.template?i.innerHTML=n.template(t):i.innerText=o.default.getPropertyByString(t,n.field),e.appendChild(i)}},{key:"__drawText",value:function(e){var t=this.elements.text;if(t&&(t.total&&(t.total.innerText=e.model.length),t.filter)){var n=e.filter?e.filter.length:e.model.length;t.filter.innerText=n}}},{key:"__drawPagination",value:function(e){var t=e.filter||e.model,n=parseInt(t.length/this.config.pagination.limit);e.totalPages=t.length%this.config.pagination.limit==0?n:n+1,t.length<this.config.pagination.limit*e.currentPage&&(e.currentPage=e.totalPages);var i=this.elements.pagination;i.current.innerText=e.currentPage,i.total.innerText=e.totalPages,i.previous.disabled=i.first.disabled=e.currentPage<=1,i.next.disabled=i.last.disabled=e.currentPage>=e.totalPages}},{key:"__drawHeaders",value:function(e){var t=document.createElement("thead"),n=document.createElement("tr");e.fields.forEach(this.__drawOrder.bind(this,e,n)),t.appendChild(n),this.elements.table.appendChild(t)}},{key:"__drawLink",value:function(e,t,n){n.href="javascript:void(0)";var i=document.createElement("i");i.className="fa ",i.style.marginLeft="5px";var r=this.iconMapper.fa[e.orderField[t.field]];i.className+=r||"fa-sort",n.addEventListener("click",e.order.bind(e,t)),n.appendChild(i)}},{key:"__drawOrder",value:function(e,t,n){var i=n.order||n.field&&!1!==n.order,r=document.createElement("th"),a=document.createElement(i?"a":"span");a.innerText=n.title,i&&this.__drawLink(e,n,a),r.appendChild(a),t.appendChild(r)}},{key:"__drawBody",value:function(e){var t=this,n=document.createElement("tbody"),i=e.filter||e.model;i=i.slice((e.currentPage-1)*this.config.pagination.limit,e.currentPage*this.config.pagination.limit),i.forEach(function(i){var r=document.createElement("tr");e.fields.forEach(function(e){t.__drawCol(r,i,e)}),n.appendChild(r)}),this.elements.table.appendChild(n)}},{key:"__setSearchTimeout",value:function(e,t,n,i){clearTimeout(this.searchInProgres),this.searchInProgres=setTimeout(t.bind(e,n),i)}},{key:"__setSimpleSearch",value:function(e){var t=this;this.elements.search.input&&(this.elements.search.input.addEventListener("keypress",function(n){13===n.keyCode&&t.__setSearchTimeout(e,e.simpleSearch,n.target.value)}),this.elements.search.button&&this.elements.search.button.addEventListener("click",function(){t.__setSearchTimeout(e,e.simpleSearch,t.elements.search.input.value)}))}},{key:"__setAdvancedSearch",value:function(e){var t=this,n={};e.fields.forEach(function(i,r){var a=t.elements.fields[i.field];n[i.field]=a,a.input&&(a.input.addEventListener("keypress",function(r){(i.autorefresh||13===r.keyCode)&&t.__setSearchTimeout(e,e.advancedSearch,n,i.autorefresh)}),a.button&&a.button.addEventListener("click",function(){t.__setSearchTimeout(e,e.advancedSearch,n)}))})}},{key:"__setPagination",value:function(e){this.elements.pagination.previous.addEventListener("click",function(){e.currentPage--,e.reload(e.filter||e.model)}),this.elements.pagination.next.addEventListener("click",function(){e.currentPage++,e.reload(e.filter||e.model)}),this.elements.pagination.first.addEventListener("click",function(){e.currentPage=1,e.reload(e.filter||e.model)}),this.elements.pagination.last.addEventListener("click",function(){e.currentPage=e.totalPages,e.reload(e.filter||e.model)})}}]),e}();n.default=l},{"./utils.js":4}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./utils.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(){function e(t,n){i(this,e),this.config=t,this.fields=t.fields,this.model=n,this.orderField={},this.currentPage=1}return r(e,[{key:"load",value:function(e){return this.render=e,this.render(this),this}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.filter=e,this.render(this)}},{key:"simpleSearch",value:function(e){var t=this,n=o.default.transformString(e);this.searchFields||(this.config.search&&this.config.search.fields?this.searchFields=this.fields.filter(function(e){return t.config.search.fields.includes(e.field)}):this.searchFields=this.fields.filter(function(e){return e.field}));var i=this.model.filter(function(e){return t.searchFields.some(function(t){return o.default.transformString(o.default.getPropertyByString(e,t.field)).indexOf(n)>=0})});this.reload(i)}},{key:"advancedSearch",value:function(e){var t=this.model;this.fields.forEach(function(n){var i=e[n.field];if(i&&i.input){var r=o.default.transformString(i.input.value);t=t.filter(function(e){return o.default.transformString(o.default.getPropertyByString(e,n.field)).indexOf(r)>=0})}}),this.reload(t)}},{key:"order",value:function(e){var t=e.field,n=1,i=-1;"asc"===this.orderField[t]?(n=-1,i=1,this.orderField={},this.orderField[t]="desc"):(this.orderField={},this.orderField[t]="asc");var r=this.filter||this.model,a=null;a=e.order?r.sort(function(t,i){return e.order(t,i)*n}):r.sort(function(e,r){var a=o.default.getPropertyByString(e,t),l=o.default.getPropertyByString(r,t);return a>l?n:a<l?i:0}),this.reload(a)}}]),e}();n.default=l},{"./utils.js":4}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,[{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?n(t.plain?r.responseText:JSON.parse(r.responseText)):i({status:r.status,message:r.responseText}))},r.open(t.method||"GET",e,!0),r.send()})}},{key:"getPropertyByString",value:function(e,t){for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},{key:"transformString",value:function(e){return e.toString().toUpperCase().trim()}}]),e}();n.default=new a},{}]},{},[1]);